<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <button id="newtweetsbutton">Show My Feed</button>
    <div id="tweetscontainer"></div>
    <script>

      // jquery library used with dollar sign
      // $("something") jQuery selector - selects an HTML node from the document
      $(document).ready(showHomeTweets);
      //Display tweets once newtweetsbutton is clicked on
      $("#newtweetsbutton").click(showHomeTweets);

      function showHomeTweets(){
        //set a variable that selects the tweetscontainer div
        var tweetsContainer = $('#tweetscontainer');
        //clears out any elements from within the tweetscontainer div
        tweetsContainer.html('');

        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];

          // -------------------------User--------------------------
          var userLink = tweet.user;
          var userDiv = $('<a></a>');
          userDiv.text('@' + userLink);
          userDiv.appendTo(tweetsContainer);
          //event object is created upon click, use console.log to explore in chrome console
          userDiv.click(function(event){
            var username = event.target.innerText.slice(1);
            console.log(username);
            showUserTweets(username);
          });

          // ------------------------Message------------------------
          var tweetDiv = $('<div></div>');
          tweetDiv.text(tweet.message);
          tweetDiv.appendTo(tweetsContainer);

          // -----------------------Timestamp--------------------------
          //reference the timestamp within the object
          var timeStamp = tweet.created_at;
          //create a new div for the timestamp
          var timeDiv = $('<div></div>');
          //populate the time div with the object's values at created_at
          timeDiv.text(timeStamp);
          timeDiv.appendTo(tweetsContainer);

          index -= 1;
        }

      }

      //-------------------user tweet feed function ---------------
      function showUserTweets(username){
        var tweetsContainer = $('#tweetscontainer');
        //clears out any elements from within the tweetscontainer div
        tweetsContainer.html('');

        var index = streams.users[username].length -1;

        while(index >= 0){
          var tweet = streams.users[username][index];

          // -------------------------User--------------------------
          var userLink = tweet.user;
          var userDiv = $('<a></a>');
          userDiv.text('@' + userLink);
          userDiv.appendTo(tweetsContainer);
          //event object is created upon click, use console.log to explore in chrome console
          userDiv.click(function(event){
            var username = event.target.innerText.slice(1);
            console.log(username);
            showUserTweets(username);
          });

          // ------------------------Message------------------------
          var tweetDiv = $('<div></div>');
          tweetDiv.text(tweet.message);
          tweetDiv.appendTo(tweetsContainer);

          // -----------------------Timestamp--------------------------
          //reference the timestamp within the object
          var timeStamp = tweet.created_at;
          //create a new div for the timestamp
          var timeDiv = $('<div></div>');
          //populate the time div with the object's values at created_at
          timeDiv.text(timeStamp);
          timeDiv.appendTo(tweetsContainer);

          index -= 1;
        }
      }
    </script>
  </body>
</html>
