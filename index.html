<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <button id="newtweetsbutton">Show My Feed</button>
    <div id="tweetscontainer"></div>
    <script>

      // jquery library used with dollar sign
      // $("something") jQuery selector - selects an HTML node from the document
      $(document).ready(showHomeTweets);
      //Display tweets once newtweetsbutton is clicked on
      $("#newtweetsbutton").click(showHomeTweets);

      function showHomeTweets(){
        var tweetArray = streams.home;
        displayTweets(tweetArray);
      }

      function showUserTweets(username){
        //note that username is defined on line 47
        var tweetArray = streams.users[username];
        displayTweets(tweetArray);
      }

      //-------------------display tweet function ---------------
      function displayTweets(tweetArray){
        var tweetsContainer = $('#tweetscontainer');
        //clears out any elements from within the tweetscontainer div
        tweetsContainer.html('');

        var index = tweetArray.length -1;

        while(index >= 0){
          var tweet = tweetArray[index];

          // -------------------------User--------------------------
          var userLink = tweet.user;
          //note that "#" within the href signals our div to not refresh the page,and we use <a> instead of <div> because we want usernames to be links
          var userAnchor = $('<a href="#"></a>');
          userAnchor.text('@' + userLink);
          userAnchor.appendTo(tweetsContainer);
          //event object is created upon click, use console.log to explore in chrome console
          userAnchor.click(function(event){
            var username = event.target.innerText.slice(1);
            console.log(username);
            showUserTweets(username);
          });

          // ------------------------Message------------------------
          var tweetDiv = $('<div></div>');
          tweetDiv.text(tweet.message);
          tweetDiv.appendTo(tweetsContainer);

          // -----------------------Timestamp--------------------------
          //reference the timestamp within the object
          var timeStamp = tweet.created_at;
          //create a new div for the timestamp
          var timeDiv = $('<div></div>');
          //populate the time div with the object's values at created_at
          timeDiv.text(timeStamp);
          timeDiv.appendTo(tweetsContainer);

          index -= 1;
        }
      }
    </script>
  </body>
</html>
